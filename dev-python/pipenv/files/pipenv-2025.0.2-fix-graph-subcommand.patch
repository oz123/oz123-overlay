From 480444678b388fec2b33217ac43b6423b811ff0f Mon Sep 17 00:00:00 2001
From: Oz Tiram <oz.tiram@gmail.com>
Date: Sun, 18 May 2025 22:10:57 +0200
Subject: [PATCH] gentoo: fix graph subcommand

Signed-off-by: Oz Tiram <oz.tiram@gmail.com>
---
 pipenv/routines/graph.py | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/pipenv/routines/graph.py b/pipenv/routines/graph.py
index cd85551f..583ba485 100644
--- a/pipenv/routines/graph.py
+++ b/pipenv/routines/graph.py
@@ -1,4 +1,5 @@
 import json as simplejson
+import os
 import sys
 from pathlib import Path
 
@@ -49,8 +50,13 @@ def do_graph(project, bare=False, json=False, json_tree=False, reverse=False):
             "`pipenv install --help` for further instructions.[/red][/bold]",
         )
         sys.exit(1)
+    env = os.environ.copy()
+    if "PYTHONPATH" in env:
+        env["PYTHONPATH"] = (
+            f"{env['PYTHONPATH']}:/usr/lib/python{sys.version_info.major}"
+            f".{sys.version_info.minor}/site-packages/"
+        )
+    else:
+        env["PYTHONPATH"] = "/usr/lib/python3.12/site-packages/"
-    c = run_command(cmd_args, is_verbose=project.s.is_verbose())
+    c = run_command(cmd_args, is_verbose=project.s.is_verbose(), env=env)
 
     # Run dep-tree.
     if not bare:
-- 
2.49.0

